## アプリケーション名
### drawer app
<br>


## アプリケーション概要 
ネットワーク上のサイトをブックマークとして個人で簡単に管理することができるシングルページアプリケーションです。


<br>


## URL
https://drawer-app-0213.herokuapp.com/

<br>


## テスト用アカウント
メールアドレス : test01@test.com  
パスワード : test01test01
<hr>
<br>


## 利用方法（各機能の詳細は下記にあります。）
[URL](https://drawer-app-0213.herokuapp.com/)にアクセスすると、ログイン画面が表示されます。そちらから上記のテストアカウントを入力するもしくは新規登録をしていただくとアプリケーションをご利用できます。(当アプリケーションはデモのため個人情報は登録しないよう宜しくお願いいたします。)
<hr>
<br>

## 目指した課題解決
プログラミングを勉強するエンジニアが、公式ドキュメントやよく利用するサイト、一時的にメモしておきたい情報のURL等、大量に嵩張ってしまう情報源をを個人でカテゴライズして管理し、容易に検索し情報を引き出すことで学習効率の向上に繋げることを目指して開発しました。
<hr>
<br>

## 洗い出した要件定義

| 優先度（高:3 中:2 低:1）| 機能            | 目的 | 詳細 | ストーリー（ユースケース） | 見積もり（所要時間） |
|-------------------------|-----------------|------|------|----------------------------|----------------------|
| 3 | DB設計 | アプリ作成における全体像を把握する必要テーブルを洗い出す | 必要テーブル: users / bookmarks | |3h|
| 3 | ユーザー管理機能 | deviseを用いたユーザー管理機能の実装 |ヘッダー右上にログイン、新規登録ボタンを設置し、ログイン時はログアウトボタンを設置する。また、ユーザーがログインしていない時はログイン画面をトップに表示する | ブックマークを個人で管理するためにはログインもしくは新規登録する必要がある|4h|
| 3 | ブックマーク一覧表示機能 |Vuetifyを利用しより見やすいブックマークを一覧表示させるため|ブックマークにはそれぞれタイトル、カテゴリー、編集ボタン、削除ボタンを表示させる|タイトルをクリックすると、新規タブが開き登録したリンク先に遷移する|5h|
| 3 | ブックマーク新規投稿機能(Create) |ブックマークをタイトルをつけてカテゴライズして登録し、後に見つけやすくするため|モーダルウィンドウを開きフォームでタイトル、URL、カテゴリーを入力する。カテゴリーは既存のものを参照して登録することも可能にする|トップページ右上の「Bookmarkを追加する」ボタンをクリックするとモーダルウィンドウが開き、フォームに各項目を入力後Add Bookmarkを押すことで投稿が完了する。|6h|
| 3 | CSRF対策 |axiosでデフォルトでCSRFトークンを設定できるようにし、POSTリクエストを送ってもエラーにならずにCSRFの対策を実現する|/ javascript / app.VueファイルでヘッダーにCSRFトークンを含める処理を実装| |2h|
| 3 | ブックマーク編集機能(Update) |投稿したブックマークを編集し、更新しやすくする| モーダルウィンドウを開きフォームで表示されているタイトル、URL、カテゴリーを編集し、更新する。カテゴリーは既存のものを参照して登録することも可能にする|各ブックマークの右上にあるペンのボタンを押すと編集用モーダルウィンドウが開く。表示された各項目を編集後、Updateボタンを押すことで更新が完了する|6h|
| 3 | ブックマーク削除機能(Delete) |不要になったブックマークを削除し、整理する|削除時に許可を要請するモーダルウィンドウを表示する|各ブックマークの右下にあるゴミ箱のボタンをクリックすることで削除用モーダルウィンドウが開き、Deleteボタンを押すことで削除することができる|5h|
| 3 | 登録したURLへの新規タブリンク機能 |ブックマークに登録したURLのリンク先に簡単にアクセスできるようにする|a タグの rel属性に noopener と norefferer を指定しリンク先にリンク元のリンク情報が送られないように設定し、target属性に"_blank"を指定し新規タブを開いてリンクさせる|各ブックマークのタイトルもしくはトップページ右のBookmark Listにあるタイトルをクリックすることで登録したブックマークのURL先にアクセスすることができる|3h|
| 3 | フリーワード検索機能 |フリーワードでタイトル、カテゴリーを参照してブックマークを検索し、表示させる|検索フォームから文字を入力するとVue.js側で非同期で検索してブックマークを表示させる|トップページ左上にある「フリーワードで探す」の下のフォームにて検索したいブックマークのタイトルもしくはカテゴリーに含まれる文字列を入力すると合致するブックマークが結果として表示される|5h|
| 3 | カテゴリー別絞り込み機能 |カテゴリーに紐づくブックマークを選択式で絞り込み、表示させる|選択メニューからカテゴリーを選択するとブックマークが絞り込まれる。またブックマークの新規投稿時にカテゴリーを新たに作成すると自動的に選択肢にカテゴリーを追加する|トップページ左上の「カテゴリーごとに絞る」下のフォームをクリックするとドロップダウンでカテゴリーが表示され、選択すると非同期で該当するブックマークが一覧表示される|5h|
| 2 |kaminari によるページネーション機能 |ブックマークの登録件数が増えるとページが長くなってしまい不便になるため、ある程度取得件数を制限してページを分ける|kaminari を導入し サーバーサイドでブックマークの取得件数を30件に制限し、フロントサイドはVuetifyのUIコンポーネントを利用して実装する|31件以上ブックマークがある場合、一覧の下にあるページネーションをクリックすると他のページのブックマークが表示される|3h|
| 2 | エラー文日本語表示機能 |ログインページとユーザー登録ページのエラーメッセージを日本語で表示させる|rail-i18n を導入しdeviseのデフォルトのエラーメッセージを日本語に設定して表示する|ログアウト処理をしたりログインもしくはユーザー登録に失敗すると日本語でエラーメッセージが表示される|2h|
| 2 | ブックマーク並び替え機能 |登録順に一覧表示されているブックマークをドラッグ＆ドロップでユーザーの好きなように並び替える|vuedraggable を導入してそれぞれのブックマークでドラッグ&ドロップを可能にし、並び替えたら右のブックマークリストも並び替えて表示させる|一覧表示されているブックマークのカード部分をドラッグし任意の位置にドロップするとブックマークを並び替えることができる|1h|
| 1 | ローディング表示機能 |ログイン後やページのリフレッシュ後にデータを取得しているときにローディングアイコンを表示させる|vue-loading-template を導入し画面中央にローディング画面を表示させる|ログイン後やページのリフレッシュ後にデータを取得している間に表示される|2h|

<br>

## 実装した機能についてのGIFと説明

### ユーザー登録機能
- ユーザー管理はRails の devise で実装しています。
- ユーザーがログインしていない場合はデフォルトでログインページが表示されます。
- 下のGIFのようにピンク色のボタンから新規登録もしくはログインページの切り替えをすることができます。また、ヘッダー右上の「Sign in」「Sign up」から遷移することも可能です。
- ログイン後はヘッダー右上部分の表示が「Sign out」に変わり、そこからログアウト処理を行うことができます。

[![Image from Gyazo](https://i.gyazo.com/392e825f1bfd55c8c554539616e12c41.gif)](https://gyazo.com/392e825f1bfd55c8c554539616e12c41)

<hr>
<br>

### ブックマーク一覧表示機能
- ログインすると、一覧ページが表示されます。
- ブックマークをドラッグ&ドロップすると任意の表示で並び替えることができます。
- ブックマークの件数が31件以上ある場合は下部のリンクからページネーションすることができます。

[![Image from Gyazo](https://i.gyazo.com/1b619aae2a50b4c5f37f51364b5a9709.gif)](https://gyazo.com/1b619aae2a50b4c5f37f51364b5a9709)

<hr>
<br>

### ブックマーク新規投稿機能
- トップページ右上の「Bookmarkを追加する」ボタンを押すとモーダルが開き、フォームが表示されます。
- 『タイトル』は50文字まで入力でき、フォームの右下で文字数をリアルタイムにカウントして表示します。
- 『URL』はバリデーションを設定しているため正しく入力しないと保存されません。
- 『カテゴリー』は50文字まで入力でき、フォームの右下で文字数をリアルタイムにカウントして表示します。
- フォーム最下部で既存のブックマークのカテゴリーを参照して追加することができます。
- 左下の「CANCEL」ボタンで投稿をキャンセル、右下の「ADD BOOKMARK」で投稿を完了することができます。

[![Image from Gyazo](https://i.gyazo.com/f4818ba5694f9344558f94c1061d38dd.gif)](https://gyazo.com/f4818ba5694f9344558f94c1061d38dd)

<hr>
<br>

### ブックマーク編集・更新機能
- 各ブックマーク右上のペンのアイコンのボタンをクリックすると編集用モーダルウィンドウが開きます。
- 編集後「UPDATE」をクリックすることで更新が完了します。

[![Image from Gyazo](https://i.gyazo.com/1eb8b817906c2ab77e99164b48100083.gif)](https://gyazo.com/1eb8b817906c2ab77e99164b48100083)

<hr>
<br>

### ブックマーク削除機能
- 各ブックマーク右下のゴミ箱のアイコンのボタンをクリックすると削除の許可を要請するモーダルウィンドウが開きます。
- 削除をキャンセルしてモーダルウィンドウを閉じる場合はモーダルの外側の暗い部分をクリックするとモーダルが閉じます。
- 「DELETE」をクリックすることで削除が完了します。

[![Image from Gyazo](https://i.gyazo.com/9ea2a573489d673791384441339dd929.gif)](https://gyazo.com/9ea2a573489d673791384441339dd929)

<hr>
<br>

### フリーワード検索機能 / カテゴリー別絞り込み機能
- トップページ左上のフォームでブックマークのフリーワード検索、カテゴリー別絞り込みをすることができます。
- カテゴリーを選択した状態で更にフリーワード検索をすることも可能です。

[![Image from Gyazo](https://i.gyazo.com/7545161dcbb6b5a27dc028311dfba094.gif)](https://gyazo.com/7545161dcbb6b5a27dc028311dfba094)

<hr>
<br>

### ブックマークに登録したURL先への新規タブでの遷移機能
- ブックマークのタイトルまたはページ右の Bookmark List にあるタイトルを押すと登録したURLに新規タブを開いて遷移します。
- a タグの rel属性に noopener と norefferer を指定しリンク先にリンク元のリンク情報が送られないように設定しています。

[![Image from Gyazo](https://i.gyazo.com/66d3f67c53498c46c3fb1d3bd513cd0a.gif)](https://gyazo.com/66d3f67c53498c46c3fb1d3bd513cd0a)

<hr>
<br>

## 今後実装予定の機能
| 機能 | 理由 |
|-|-|
|お気に入り機能|頻繁にアクセスするブックマークを一覧表示させより便利にさせるため|
|フリーワード検索の大文字、小文字を区別せずに検索する機能| 現状では検索で英語を入力すると大文字、小文字を区別してしまうため
|ユーザー認証機能をJsonWebToken(JWT)に移行する|現在は Rails の devise でユーザー管理を実装しているが、SPAなのでVue.js側で認証できる方がより効率的で良いと考えたため|

<br>

# データベース設計

### ER図はこちらになります。  
[![Image from Gyazo](https://i.gyazo.com/d3a9c185be6788fb56367da23fc9adc2.png)](https://gyazo.com/d3a9c185be6788fb56367da23fc9adc2)


## 各テーブルの構成

### Usersテーブル

| Column    | Type     | Options     |
| --------- | -------- | ----------- |
| nickname  | string   | null: false |
| email     | string   | null: false |
| password  | string   | null: false |

### Association
- has_many :bookmarks

<hr>

### Bookmarksテーブル

| Column    | Type     | Options     |
| --------- | -------- | ----------- |
| title     | string   | null: false |
| url       | string   | null: false |
| category  | string   | null: false |

### Association
- belongs_to :user

<br>

# ローカルでの動作方法

## 開発環境とバージョン確認

<div style="display: flex;">
  <table border="1">
    <tr>
      <th>開発環境</th>
      <th>詳細</th>
    </tr>
    <tr>
      <td>開発言語</td>
      <td>Ruby / JavaScript / Vue.js</td>
    </tr>
    <tr>
      <td>フレームワーク</td>
      <td>Ruby on Rails / Vuetify</td>
    </tr>
    <tr>
      <td>RDB</td>
      <td>MySQL</td>
    </tr>
    <tr>
      <td>バージョン管理</td>
      <td>Git / Github</td>
    </tr>
    <tr>
      <td>デプロイ</td>
      <td>heroku</td>
    </tr>
    <tr>
      <td>Editor</td>
      <td>VScode</td>
    </tr>
    <tr>
      <td>設計 / タスク管理</td>
      <td>Trello</td>
    </tr>
    <tr>
      <td>OS</td>
      <td>MacOS BigSur</td>
    </tr>
    </table>
    <ul style="font-size: 16px;">バージョン
      <li style="margin-bottom: 5px;">Ruby : 2.6.5</li>
      <li style="margin-bottom: 5px;">Ruby on Rails : 6.0.0</li>
      <li style="margin-bottom: 5px;">webpacker : 4.0</li>
      <li style="margin-bottom: 5px;">node : v14.16.0</li>
      <li style="margin-bottom: 5px;">yarn : 1.22.5</li>
      <li style="margin-bottom: 5px;">Vue.js : 2.6.12</li>
      <li style="margin-bottom: 5px;">Vuetify : 2.4.7</li>
      <li>axios : 0.21.1</li>
    </ul>
</div>
<br>

## ローカルで動作確認するために必要なコマンド

```ターミナル
% git clone https://github.com/ukkiy-ray/drawer-app.git
% cd drawer-app
% bundle install
% yarn install
% rails db:create
% rails db:migrate
```